<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ASCEND SUPPORT FORM</title>
<link rel="icon" href="image/ascend.gif" type="image/gif">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="stlye.css">
</head>

<body>

<h1>ASCEND APPLICATION FORM</h1>

<div class="logo-box">
    <img src="image/ascend.gif">
    <hr>
</div>

<form id="Customer">

<table border="1">
<tr>
<th colspan="2">ASCEND PURCHASE FORM</th>
</tr>

<tr>
<td>IC NAME</td>
<td><input type="text" name="pname" placeholder="ENTER YOUR NAME" required></td>
</tr>

<tr>
<td>DISCORD NAME</td>
<td><input type="text" name="dname" placeholder="ENTER YOUR DISCORD NAME" required></td>
</tr>

<tr>
<td>SELECTED PACK / VEHICLE</td>
<td><input type="text" id="selectedPack" readonly></td>
</tr>

<tr>
<td>AMOUNT</td>
<td><input type="text" id="amountField" readonly></td>
</tr>

<tr>
<td>PAYMENT PROOF</td>
<td><input type="file" name="paymentProof" accept="image/*,.pdf" required></td>
</tr>
</table>

<center>
<div class="custom-form">
<input class="form-submit" type="submit" value="Submit">
<input class="form-submit" type="reset" value="Clear">
</div>
</center>

</form>

<center>
<div class="vehicle-card">
<h1>QR Code</h1>
<img src="image/QR.jpg">
</div>
</center>

<script>
// ================= AUTO FILL FROM URL =================
document.addEventListener("DOMContentLoaded", function () {
    const urlParams = new URLSearchParams(window.location.search);
    const vehicle = urlParams.get("vehicle");
    const pack = urlParams.get("pack");
    const price = urlParams.get("price");

    if (vehicle) document.getElementById("selectedPack").value = vehicle;
    if (pack) document.getElementById("selectedPack").value = pack;
    if (price) document.getElementById("amountField").value = "‚Çπ" + price;
});


// ================= DISCORD SPAM SHIELD =================
const SECRET_KEY = "ASCEND_SECURE_2026";

let isSending = false;
let lastSubmitTime = 0;
let lastUser = "";
let lastPack = "";

document.getElementById("Customer").addEventListener("submit", function(e){
e.preventDefault();

// security check
if(!SECRET_KEY){
alert("Security Blocked");
return;
}

// double click block
if(isSending){
alert("‚õî Already sending...");
return;
}

// 1 min cooldown
const now = Date.now();
if(now - lastSubmitTime < 60000){
alert("‚õî Wait 1 minute before next submit!");
return;
}

const pname = document.querySelector("[name='pname']").value.trim();
const dname = document.querySelector("[name='dname']").value.trim();
const pack = document.getElementById("selectedPack").value;
const amount = document.getElementById("amountField").value;
const paymentProofFile = document.querySelector("[name='paymentProof']").files[0];

// duplicate block
if(pname === lastUser && pack === lastPack){
alert("‚õî Duplicate order detected!");
return;
}

lastUser = pname;
lastPack = pack;
isSending = true;
lastSubmitTime = now;

const btn = document.querySelector(".form-submit");
btn.value = "Sending...";
btn.disabled = true;

// ===== YOUR 2 WEBHOOKS =====
const webhooks = [
    "https://discord.com/api/webhooks/1469756792908152883/bYlDZ5hHPPDeN_wdd1HLOCUqSGeXPC-PWNyJHOIv_zEiA99tXEzCMDWRA46Cc24NEdKH",
"https://discord.com/api/webhooks/1470090123080106156/3AqTyeYpozL26bebIpjkgaFaXXtvl2JI2hMyjx34FzLr7k_vMimCexkmY4h4ClutJZvB"
];

const payload = {
content: "üö® **NEW PURCHASE** <@&1461606860372316377> <@&1461606866810437702>",
embeds:[{
title:"üõí ASCEND PURCHASE",
color:16711935,
fields:[
{name:"IC Name",value:pname,inline:true},
{name:"Discord",value:dname,inline:true},
{name:"Pack",value:pack||"None",inline:true},
{name:"Amount",value:amount||"None",inline:true},
{name:"Security",value:"Protected by ASCEND Shield",inline:false}
],
footer:{text:"ASCEND ANTISPAM SYSTEM"},
timestamp:new Date().toISOString()
}]
};

// send to both webhooks
Promise.all(webhooks.map(url=>{
const fd=new FormData();
fd.append("payload_json",JSON.stringify(payload));
if(paymentProofFile){
fd.append("file",paymentProofFile);
}
return fetch(url,{method:"POST",body:fd});
}))
.then(()=>{
alert("‚úÖ Submitted Successfully!");
document.getElementById("Customer").reset();
btn.value="Submit";
btn.disabled=false;
isSending=false;
})
.catch(()=>{
alert("‚ùå Webhook Error");
btn.value="Submit";
btn.disabled=false;
isSending=false;
});
});
</script>

</body>
</html>

